openapi: 3.0.2
info:
  title: Tracing App Backend API
  version: 0.0.1
servers:
  - url: "http://localhost:3000"
    description: Development server
paths:
  /locations/:
    get:
      description: Returns the list of all locations
      responses:
        "200":
          description: JSON array with GeoJSON Points
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GeoJSONPoint"
              examples:
                twoelems:
                  $ref: "#/components/examples/geoJsonPoint2DArrayExample"

  /locations/{userId}/:
    get:
      description: Returns the list of locations the user has visited
      responses:
        "200":
          description: JSON array with GeoJSON Points
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GeoJSONPoint"
              examples:
                twoelems:
                  $ref: "#/components/examples/geoJsonPoint2DArrayExample"
                empty:
                  $ref: "#/components/examples/emptyArrayExample"

    post:
      description: "Adds location records"
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/GeoJSONPoint"
            examples:
              twoelems:
                $ref: "#/components/examples/geoJsonPoint2DArrayExample"
      responses:
        "201":
          description: Created
    parameters:
      - name: userId
        in: path
        required: true
        description: The id of the user
        schema:
          $ref: "#/components/schemas/userId"

components:
  schemas:
    GeoJSONPoint:
      type: object
      description: GeoJSON Point2D
      example:
        location:
          type: "Point"
          coordinates:
            - 8.454
            - 50.225
      properties:
        location:
          type: object
          properties:
            type:
              type: string
              enum:
                - Point
            coordinates:
              type: array
              items:
                type: number
                maxItems: 2
                minItems: 2

    userId:
      type: integer
      format: int64

  examples:
    geoJsonPoint2DArrayExample:
      summary: Array with two GeoJSON Point2D records
      value:
        - location:
            type: "Point"
            coordinates:
              - -122.96
              - 50.114
        - location:
            type: "Point"
            coordinates:
              - 8.454
              - 50.225

    geoJsonPoint2DExample:
      summary: GeoJSON Point2D record
      value:
        location:
          type: "Point"
          coordinates:
            - -122.96
            - 50.114

    emptyArrayExample:
      summary: Empty Array
      value: []
